<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout" layout:decorator="default">
<head>

<!-- common css are loaded here by upper layer -->

<!-- custom elements in <head> tag -->
<style type="text/css">
.page-header {
	padding-top: 1px;
	margin-top: 1px;
}

.well {
	background: white;
	border-width: 1px;
	border-color: #D9D9D9;
	margin: 0px;
	padding: 0px 15px 15px 15px;
}

.well h3 {
	margin-top: 15px;
}

.form-group {
	margin-bottom: 20px;
}

#error-title {
	padding-top: 0px;
}

h3 {
	margin-top: 15px;
}
</style>
<title>Account creation</title>
</head>
<body>
	<div layout:fragment="body" class="container-fluid">
		<div class="row">
			<div class="page-header">
				<div class="text-center">
					<h1>
						<strong>Registraion</strong>
					</h1>
				</div>
				<h1 class="text-center">
					<small>Welcome to IMColla!</small>
				</h1>
			</div>
			<!-- /.page-header -->
		</div>
		<!-- /.row -->

		<div id="registrationContainer" class="container-fluid col-xs-offset-1 col-xs-10 col-sm-offset-2 col-sm-8 col-md-offset-3 col-md-6 col-lg-offset-4 col-lg-4" th:object="${memberForm}">
			
			<div class="error_container" th:if="${#fields.hasErrors('*')}" th:with="errorCount=${#lists.size(#fields.errors())}">
				<div id="error-title" class="alert alert-warning alert-dismissible">
					<button type="button" class="close" data-dismiss="alert">&times;</button>
					<h3><span><Strong>Server validation failed</Strong></span></h3>
					<span th:text="'Total : ' + ${errorCount}"></span>
				</div>
				
				<div class="alert alert-danger alert-dismissible" th:if="${#fields.hasErrors('email')}"  th:with="errorMsg=${#fields.errors('email')}">
					<button type="button" class="close" data-dismiss="alert">&times;</button>
					<span><strong>email</strong> is invalid</span><br />
					<span th:text="${errorMsg}"></span>
				</div>
				
				<div class="alert alert-danger alert-dismissible" th:if="${#fields.hasErrors('username')}" th:with="errorMsg=${#fields.errors('username')}">
					<button type="button" class="close" data-dismiss="alert">&times;</button>
					<span><strong>username</strong> is invalid</span><br />
					<span th:text="${errorMsg}"></span>
				</div>
				
				<div class="alert alert-danger alert-dismissible" th:if="${#fields.hasErrors('password')}"  th:with="errorMsg=${#fields.errors('password')}">
					<button type="button" class="close" data-dismiss="alert">&times;</button>
					<span><strong>password</strong> is invalid</span><br />
					<span th:text="${errorMsg}"></span>
				</div>
				
				<!-- for test
				<div id="error-title" class="alert alert-warning alert-dismissible">
					<button type="button" class="close" data-dismiss="alert">&times;</button>
					<h3><span><Strong>Unexpected server error</Strong></span></h3>
					<span th:text="${serverError}"></span>
				</div>
				-->
			</div>
			
			<div class="error_container" th:if="${serverError}">
				<div id="error-title" class="alert alert-warning alert-dismissible">
					<button type="button" class="close" data-dismiss="alert">&times;</button>
					<h3><span><Strong>Unexpected server error</Strong></span></h3>
					<span th:text="${serverError}"></span>
				</div>
			</div>
			

			<div class="well">
				<h3>
					<strong>Create personal account</strong>
				</h3>
				
				<form action="#" th:action="@{/new_account/validate_input_form}" method="post">
					<div class="form-group has-feedback">
						<label class="control-label" for="email">Email&nbsp;(ID)</label>
						<div class="">
							<input id="email" name="email" class="form-control" type="email" th:value="*{email}" required="required" placeholder="email" data-error="Email address is invalid" />
							<span class="glyphicon form-control-feedback" aria-hidden="true"></span>
							<!-- <div class="help-block with-errors"></div> -->
						</div>
					</div>
					
					<div class="form-group has-feedback">
						<label class="control-label" for="username">Username</label>
						<div class="">
							<input id="username" name="username" class="form-control" th:value="*{username}" required="required" placeholder="username" data-error="Name is invalid" />
							<span class="qtip_marker"></span>
							<span class="glyphicon form-control-feedback" aria-hidden="true"></span>
							<!-- <div class="help-block with-errors"></div> -->
						</div>
					</div>
					
					<div class="form-group has-feedback">
						<label class="control-label" for="password">Password</label>
						<div class="">
							<input id="password" name="password" class="form-control" type="password" placeholder="password" required="required" data-error="password is invalid" />
							<span class="glyphicon form-control-feedback" aria-hidden="true"></span>
							<!-- <div class="help-block with-errors"></div> -->
						</div>
					</div>
					
					<div class="form-group has-feedback">
						<label class="control-label" for="passwordCheck">Password check</label>
						<div class="">
							<input id="passwordCheck" name="passwordCheck" class="form-control" type="password" required="required" placeholder="confirm" data-error="password is empty" data-match="#password" data-match-error="password doesn't match"/>
							<span class="glyphicon form-control-feedback" aria-hidden="true"></span>
							<!-- <div class="help-block with-errors"></div> -->
						</div>
					</div>

					<div class="form-group">
						<div class="">
							<button id="createAccount" class="btn btn-success btn-block" type="submit">Create an account</button>
						</div>
					</div>
				</form>
			</div>
			<!-- /.well -->
		</div>
		<!-- /#registrationContainer .container-fluid -->
	</div>
	<!-- /layout:fragment="body" .container-fluid -->


	<!-- Custom Javascript -->
	<div layout:fragment="customScript">
		<script src="../js/notify.js" th:src="@{/js/notify.js}" type="text/javascript"></script>
		<script>
			notify.notify('회원가입 폼', '회원가입 페이지입니다.');
	
			$('#createAccount').click(function() {
				notify.notify('title', 'createAccount button is clicked');
			});
	
			$(document).ready(function() {
				$('form').validator();
	
			});
		</script>
	</div>
</body>
</html>